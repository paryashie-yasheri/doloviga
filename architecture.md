# Архитектура

## Компоненты в которых мы уверены на 100%

### Микроконтроллер esp32

Архитектура risc-v
WIFI
Bluetooth (v4.2 BR/EDR and BLE)
4 x SPI мастер-интерфейса
2 x I2C мастер-интерфейса
2 x I2S мастер-интерфейса

### Микрофон INMP441

Протокол I2S для взаимодействия с микроконтроллером

## Остальные компоненты

### Дисплей

В данный момент ищем и тестируем разные дисплеи. И TFT и OLED

Дисплей и микроконтроллер будут взаимодействовать посредством SPI интерфейса

### Другие датчики

Так как у нас остается не занятым I2C мы можем поставить какие-нибудь датчики чтобы отображать информацию о температуре или влажности помещения

## Сценарии общения

На данный момент мы придумали несколько сценариев взаимодействия наших компонентов.

### Bluetooth для синхронизации времени

esp32 подключается к мобильному устройству по посредством Bluetooth (BLE) для того чтобы автоматически подтянуть часовой пояс и синхронизировать время.

Это самый удобный способ установить правильное время на устройстве, но минусом этого является сложность реализации.

### esp32 <- I2S <- микрофон

I2S - интерфейс для цифрового аудио. Он передаёт не байты
“как есть”, а поток звуковых отсчётов (samples) с определённой частотой

микрофон посылает поток звуковых данных -> ESP32 читает
их по I2S -> может визуализировать громкость на дисплее.

### SPI для дисплея

SPI является наилучшим выбором для взаимодействия с дисплеем так как он быстрее I2C
